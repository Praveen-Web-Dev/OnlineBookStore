@model Category

@*<div class="card shadow border-0 mt-4">
    <div class="card-header bg-white bg-gradient m-lg-0 py-3">
        <div class="row">
            <div class="col-12 text-center">
                <h2 class="text-primary py-2"> Create Category</h2>
            </div>
        </div>
    </div>
    <div class="card-body p-4">
        <form method="post" class="row">
            <div class="border p-3">
                
                 <div asp-validation-summary="ModelOnly"></div> 
                <div class="form-floating py-2 col-12">
                    <input asp-for="Name" class="form-control border-0 shadow" type="text"  />
                    <label asp-for="Name" class="ms-2"></label>
                    <span asp-validation-for="Name" class="text-danger"></span>

                </div>
                <div class="form-floating mb-3 row p-1">
                    <input asp-for="DisplayOrder" class="form-control border-0 shadow" type="text" />
                    <label asp-for="DisplayOrder" class="ms-2"></label>
                    <span asp-validation-for="DisplayOrder" class="text-danger"></span>

                </div>
                <div class="row pt-2">
                    <div class="col-6 col-md-3">
                        <button type="submit" class="btn btn-primary w-100 ">Create</button>
                    </div>
                    <div class="col-6 col-md-3">
                        <a asp-controller="Category" asp-action="Index" class="btn btn-outline-primary border form-control">Back to List</a>
                    </div>
                </div>
            </div>
        </form>
    </div>
</div>
*@


<div class="container py-4">
    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb" class="mb-3">
        <ol class="breadcrumb mb-0">
            <li class="breadcrumb-item"><a asp-controller="Home" asp-action="Index">Home</a></li>
            <li class="breadcrumb-item"><a asp-controller="Category" asp-action="Index">Categories</a></li>
            <li class="breadcrumb-item active" aria-current="page">Create</li>
        </ol>
    </nav>

    <div class="card shadow-sm border-0">
        <div class="card-header bg-white py-3">
            <div class="d-flex align-items-center justify-content-between">
                <h1 class="h4 text-primary mb-0">Create Category</h1>
                <a asp-controller="Category" asp-action="Index" class="btn btn-outline-secondary">
                    <i class="bi bi-arrow-left"></i> Back to list
                </a>
            </div>
        </div>

        <div class="card-body">
            @* Show any server-side message (e.g., TempData["Error"]) *@
            @if (TempData["Error"] is string err && !string.IsNullOrWhiteSpace(err))
            {
                <div class="alert alert-danger d-flex align-items-center" role="alert">
                    <i class="bi bi-exclamation-triangle me-2"></i>
                    <div>@err</div>
                </div>
            }

            <form method="post" class="row g-3" novalidate>
                @Html.AntiForgeryToken()

                <div class="col-12">
                    <div asp-validation-summary="ModelOnly" class="text-danger small" role="alert"></div>
                </div>

                <div class="col-12">
                    <div class="form-floating">
                        <input asp-for="Name"
                               class="form-control"
                               type="text"
                               placeholder="Category name"
                               autocomplete="off"
                               aria-describedby="nameHelp" />
                        <label asp-for="Name"></label>
                        <div id="nameHelp" class="form-text">
                            Choose a short, descriptive name (e.g., “Fiction”, “Accessories”).
                        </div>
                        <span asp-validation-for="Name" class="text-danger small"></span>
                    </div>
                </div>

                <div class="col-12 col-md-6">
                    <div class="form-floating">
                        <input asp-for="DisplayOrder"
                               class="form-control"
                               type="number"
                               inputmode="numeric"
                               min="0"
                               step="1"
                               placeholder="Display order"
                               aria-describedby="orderHelp" />
                        <label asp-for="DisplayOrder"></label>
                        <div id="orderHelp" class="form-text">
                            Lower numbers appear first.
                        </div>
                        <span asp-validation-for="DisplayOrder" class="text-danger small"></span>
                    </div>
                </div>

                <div class="col-12 d-flex gap-2 pt-2">
                    <button type="submit" class="btn btn-primary" id="submitBtn">
                        <span class="submit-label"><i class="bi bi-plus-circle me-1"></i>Create</span>
                        <span class="submit-spinner d-none spinner-border spinner-border-sm align-text-top" role="status" aria-hidden="true"></span>
                    </button>

                    <a asp-controller="Category" asp-action="Index" class="btn btn-outline-secondary">
                        Cancel
                    </a>
                </div>
            </form>
        </div>
    </div>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        // Simple submit spinner & disable to prevent double-submit
        (function () {
            const form = document.querySelector('form');
            const btn = document.getElementById('submitBtn');
            if (!form || !btn) return;

            form.addEventListener('submit', function () {
                btn.disabled = true;
                btn.querySelector('.submit-label').classList.add('d-none');
                btn.querySelector('.submit-spinner').classList.remove('d-none');
            });
        })();
    </script>
}

@* @section Scripts{
    @{
    <partial name="_ValidationScriptsPartial" />
    }
} *@